"use strict";(()=>{class i{static#SUPPORTED_ACTIONS=["show","close"];el;once;force;outsideControls;insideControls;dialogAttrObserver;constructor({element:e,config:t={}}){this.el=e,this.once=t.once??null!=this.el.getAttribute("data-dialog-once"),this.force=t.force??null!=this.el.getAttribute("data-dialog-force"),this.outsideControls=[...document.querySelectorAll(`[data-dialog-action][data-dialog-id="${this.el.id}"]:not(#${this.el.id} *)`)],this.insideControls=[...this.el.querySelectorAll(`[data-dialog-action][data-dialog-id="${this.el.id}"]`)],this.dialogAttrObserver=new MutationObserver((e,t)=>{e.forEach(async e=>{var t;"open"===e.attributeName&&(e=e.target).hasAttribute("open")&&(e.removeAttribute("inert"),(t=e.querySelector("[autofocus]"))?t.focus():e.querySelectorAll('button:not([disabled]):not(:scope [data-dialog] *), [href]:not(:scope [data-dialog] *), input:not([type="hidden"]):not([disabled]):not(:scope [data-dialog] *), select:not([disabled]):not(:scope [data-dialog] *), textarea:not([disabled]):not(:scope [data-dialog] *), [tabindex]:not([tabindex="-1"]):not(:scope [data-dialog] *)')[0]?.focus(),this.insideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick),e.addEventListener("click",this.#handleControlClick)}),document.body.style.overflow="hidden")})}),this.dialogAttrObserver.observe(this.el,{attributes:!0}),this.el.hasAttribute("open")&&this.el.removeAttribute("inert"),this.el.removeEventListener("close",this.#handleElementClose),this.el.addEventListener("close",this.#handleElementClose),this.outsideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick),e.addEventListener("click",this.#handleControlClick)}),this.force&&this.show()}close=()=>{this.el.close("dismiss")};show=()=>{this.el.showModal()};#handleControlClick=e=>{e.preventDefault();var t=e["currentTarget"],o=t.getAttribute("data-dialog-action"),t=t.getAttribute("data-dialog-action-args");return i.#SUPPORTED_ACTIONS.includes(o)&&(o=this[o])instanceof Function?o({args:t,evt:e}):void 0};#handleElementClose=({currentTarget:e})=>{e.setAttribute("inert",""),document.querySelector("dialog[data-dialog][open]")||(document.body.style.overflow=""),this.insideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick)}),this.once&&(this.outsideControls.forEach(e=>{e.removeEventListener("click",this.#handleControlClick),e.parentNode?.removeChild(e)}),this.el.removeEventListener("close",this.#handleElementClose),this.el.parentNode?.removeChild(this.el))}}null==window.welpodron&&(window.welpodron={}),window.welpodron.dialog=i,document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("dialog[data-dialog]").forEach(e=>{new i({element:e})})},{once:!0})})();
//# sourceMappingURL=script.min.js.map