import{animate}from"../animate/index.js";const MODULE_BASE="tabs",ATTRIBUTE_BASE="data-w-"+MODULE_BASE,ATTRIBUTE_BASE_ID=ATTRIBUTE_BASE+"-id",ATTRIBUTE_ITEM=ATTRIBUTE_BASE+"-item",ATTRIBUTE_ITEM_ID=ATTRIBUTE_ITEM+"-id",ATTRIBUTE_ITEM_ACTIVE=ATTRIBUTE_ITEM+"-active",ATTRIBUTE_CONTROL=ATTRIBUTE_BASE+"-control",ATTRIBUTE_CONTROL_ACTIVE=ATTRIBUTE_CONTROL+"-active",ATTRIBUTE_ACTION=ATTRIBUTE_BASE+"-action",ATTRIBUTE_ACTION_ARGS=ATTRIBUTE_ACTION+"-args",ATTRIBUTE_ACTION_FLUSH=ATTRIBUTE_ACTION+"-flush";class TabsItem{spAc=["hide","show"];tabs;el;an=null;constructor({element:t,tabs:T}){this.el=t,this.tabs=T}show=async({})=>{this.an&&clearTimeout(this.an.timer),null==this.el.getAttribute(ATTRIBUTE_ITEM_ACTIVE)&&(this.el.setAttribute(ATTRIBUTE_ITEM_ACTIVE,""),document.querySelectorAll(`[${ATTRIBUTE_ACTION_ARGS}="${this.el.getAttribute(""+ATTRIBUTE_ITEM_ID)}"]`).forEach(t=>{t.setAttribute(ATTRIBUTE_CONTROL_ACTIVE,"")}),this.el.style.opacity="0",this.el.scrollHeight,this.an=animate({element:this.el,callback:()=>{this.el.style.opacity="1"}}),await this.an?.promise,this.el.style.removeProperty("opacity"),this.an=null)};hide=async({})=>{this.an&&clearTimeout(this.an.timer),null!=this.el.getAttribute(ATTRIBUTE_ITEM_ACTIVE)&&(this.an=animate({element:this.el,callback:()=>{this.el.removeAttribute(ATTRIBUTE_ITEM_ACTIVE),document.querySelectorAll(`[${ATTRIBUTE_ACTION_ARGS}="${this.el.getAttribute(""+ATTRIBUTE_ITEM_ID)}"]`).forEach(t=>{t.removeAttribute(ATTRIBUTE_CONTROL_ACTIVE)})}}),await this.an?.promise,this.an=null)}}class Tabs{spAc=["show"];element;_items=[];constructor({element:t}){this.el=t,document.addEventListener("click",this.hDC)}hDC=t=>{let T=t["target"];var e,i;if(T&&(T=T.closest(`[${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"][${ATTRIBUTE_CONTROL}][${ATTRIBUTE_ACTION}]`)))return i=T.getAttribute(ATTRIBUTE_ACTION),e=T.getAttribute(ATTRIBUTE_ACTION_ARGS),T.getAttribute(ATTRIBUTE_ACTION_FLUSH)||t.preventDefault(),i&&this.spAc.includes(i)&&(i=this[i])instanceof Function?i({args:e,event:t}):void 0};show=async({args:T,event:t})=>{if(T){var e=this.el.getAttribute(ATTRIBUTE_BASE_ID);if(e){e=this.el.querySelectorAll(`[${ATTRIBUTE_BASE_ID}="${e}"][${ATTRIBUTE_ITEM_ID}]`);if(e){var i=[...e].find(t=>t.getAttribute(ATTRIBUTE_ITEM_ID)===T);if(i){for(var A of this._items)A.an&&clearTimeout(A.an.timer);this._items=[...e].map(t=>new TabsItem({element:t,tabs:this}));var s,I=[];for(s of this._items)s.element===i?I.push(s.show({args:T,event:t})):I.push(s.hide({args:T,event:t}));await Promise.allSettled(I)}}}}}}export{Tabs as tabs,TabsItem as tabsItem};
//# sourceMappingURL=index.min.js.map