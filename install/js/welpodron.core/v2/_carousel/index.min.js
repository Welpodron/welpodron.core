const MODULE_BASE="carousel",ATTRIBUTE_BASE="data-w-"+MODULE_BASE,ATTRIBUTE_BASE_ID=ATTRIBUTE_BASE+"-id",ATTRIBUTE_ITEM=ATTRIBUTE_BASE+"-item",ATTRIBUTE_ITEM_ACTIVE=ATTRIBUTE_ITEM+"-active",ATTRIBUTE_ITEM_TRANSLATING_FROM_LEFT=ATTRIBUTE_ITEM+"-translating-from-left",ATTRIBUTE_ITEM_TRANSLATING_FROM_RIGHT=ATTRIBUTE_ITEM+"-translating-from-right",ATTRIBUTE_ITEM_TRANSLATING_TO_LEFT=ATTRIBUTE_ITEM+"-translating-to-left",ATTRIBUTE_ITEM_TRANSLATING_TO_RIGHT=ATTRIBUTE_ITEM+"-translating-to-right",ATTRIBUTE_CONTROL=ATTRIBUTE_BASE+"-control",ATTRIBUTE_CONTROL_ACTIVE=ATTRIBUTE_CONTROL+"-active",ATTRIBUTE_ACTION=ATTRIBUTE_BASE+"-action",ATTRIBUTE_ACTION_ARGS=ATTRIBUTE_ACTION+"-args",ATTRIBUTE_ACTION_FLUSH=ATTRIBUTE_ACTION+"-flush",DEFAULT_EVENT_TOUCHSTART="touchstart",DEFAULT_EVENT_TOUCHMOVE="touchmove",DEFAULT_EVENT_TOUCHEND="touchend",DEFAULT_EVENT_CLICK="click";class CarouselItem{spAc=["hide","show"];carousel;el;constructor({element:T,carousel:t}){this.el=T,this.carousel=t}cA=()=>{this.el.removeAttribute(ATTRIBUTE_ITEM_TRANSLATING_FROM_LEFT),this.el.removeAttribute(ATTRIBUTE_ITEM_TRANSLATING_FROM_RIGHT),this.el.removeAttribute(ATTRIBUTE_ITEM_TRANSLATING_TO_RIGHT),this.el.removeAttribute(ATTRIBUTE_ITEM_TRANSLATING_TO_LEFT)};show=({args:T})=>{null==this.el.getAttribute(ATTRIBUTE_ITEM_ACTIVE)&&(this.el.setAttribute(ATTRIBUTE_ITEM_ACTIVE,""),this.cA(),document.querySelectorAll(`[${ATTRIBUTE_ACTION_ARGS}="${this.el.getAttribute(""+ATTRIBUTE_ITEM)}"][${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"][${ATTRIBUTE_CONTROL}]`).forEach(T=>{T.setAttribute(ATTRIBUTE_CONTROL_ACTIVE,"")}),"right"===T?(this.el.setAttribute(ATTRIBUTE_ITEM_TRANSLATING_FROM_LEFT,""),this.el.offsetTop,this.el.removeAttribute(ATTRIBUTE_ITEM_TRANSLATING_FROM_LEFT)):"left"===T&&(this.el.setAttribute(ATTRIBUTE_ITEM_TRANSLATING_FROM_RIGHT,""),this.el.offsetTop,this.el.removeAttribute(ATTRIBUTE_ITEM_TRANSLATING_FROM_RIGHT)))};hide=({args:T})=>{null!=this.el.getAttribute(ATTRIBUTE_ITEM_ACTIVE)&&(this.el.removeAttribute(ATTRIBUTE_ITEM_ACTIVE),this.cA(),document.querySelectorAll(`[${ATTRIBUTE_ACTION_ARGS}="${this.el.getAttribute(""+ATTRIBUTE_ITEM)}"][${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"][${ATTRIBUTE_CONTROL}]`).forEach(T=>{T.removeAttribute(ATTRIBUTE_CONTROL_ACTIVE)}),"right"===T?this.el.setAttribute(ATTRIBUTE_ITEM_TRANSLATING_TO_RIGHT,""):"left"===T&&this.el.setAttribute(ATTRIBUTE_ITEM_TRANSLATING_TO_LEFT,""))}}class Carousel{spAc=["show"];element;tSX=0;tDX=0;sTh=45;items=[];cItIn=-1;nItIn=-1;constructor({element:T}){this.el=T,document.addEventListener(DEFAULT_EVENT_CLICK,this.hDC),this.el.addEventListener(DEFAULT_EVENT_TOUCHSTART,this.hETS,{passive:!0})}hDC=T=>{let t=T["target"];var e,I;if(t&&(t=t.closest(`[${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"][${ATTRIBUTE_CONTROL}][${ATTRIBUTE_ACTION}]`)))return I=t.getAttribute(ATTRIBUTE_ACTION),e=t.getAttribute(ATTRIBUTE_ACTION_ARGS),t.getAttribute(ATTRIBUTE_ACTION_FLUSH)||T.preventDefault(),I&&this.spAc.includes(I)&&(I=this[I])instanceof Function?I({args:e,event:T}):void 0};hETS=T=>{this.el.addEventListener(DEFAULT_EVENT_TOUCHEND,this.hETE,{once:!0}),this.el.addEventListener(DEFAULT_EVENT_TOUCHMOVE,this.hETM,{passive:!0}),this.tSX=T.touches[0].clientX};hETM=T=>{this.tDX=T.touches&&1<T.touches.length?0:T.touches[0].clientX-this.tSX};hETE=T=>{this.el.removeEventListener(DEFAULT_EVENT_TOUCHMOVE,this.hETM);var t=Math.abs(this.tDX);t>this.sTh&&this.show({args:t/this.tDX<0?"next":"prev",event:T}),this.tDX=0};gNIt=({index:t})=>{this.its&&(-1===this.cItIn&&(this.cItIn=this.its.findIndex(T=>null!=T.element.getAttribute(ATTRIBUTE_ITEM_ACTIVE))),-1!==this.cItIn)&&(this.nItIn="next"===t?(this.cItIn+1)%this.its.length:"prev"===t?(this.cItIn+this.its.length-1)%this.its.length:this.its.findIndex(T=>T.element.getAttribute(ATTRIBUTE_ITEM)===t))};gNDi=()=>{var T;if(-1!==this.nItIn&&-1!==this.cItIn&&this.nItIn!==this.cItIn)return T=this.its.length-1,(this.nItIn!==T||0!==this.cItIn)&&(0===this.nItIn&&this.cItIn===T||this.nItIn>this.cItIn)?"left":"right"};show=({args:T,event:t})=>{var e;T&&(e=this.el.getAttribute(ATTRIBUTE_BASE_ID))&&(e=this.el.querySelectorAll(`[${ATTRIBUTE_BASE_ID}="${e}"][${ATTRIBUTE_ITEM}]`))&&(this.its=[...e].map(T=>new CarouselItem({element:T,carousel:this})),this.gNIt({index:T}),-1!==this.nItIn)&&-1!==this.cItIn&&(e=this.gNDi())&&(this.its[this.cItIn].hide({args:e,event:t}),this.its[this.nItIn].show({args:e,event:t}),this.cItIn=this.nItIn)}}export{Carousel as carousel,CarouselItem as carouselItem};
//# sourceMappingURL=index.min.js.map