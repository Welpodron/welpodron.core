!function(c){!function(e){"use strict";const i="data-w-popover",n=i+"-id",s=i+"-active",o=(i,i+"-control"),r=i+"-action",h=r+"-args",l=r+"-flush";e.popover=class{spAc=["hide","show"];isHoverable=!1;hoverableLeaveTimeout=null;isAc=!1;el;lFdE;resizeObserver;currentAnchor;constructor({element:e,config:t={}}){this.el=e,this.isAc=null!=this.el.getAttribute(s),this.isHoverable=null!=this.el.getAttribute("data-w-popover-hoverable")||!0===t.isHoverable,this.lFdE=c.activeElement,this.resizeObserver=new ResizeObserver((e,t)=>{for(const i of e)this.currentAnchor&&this.calculatePosition({anchor:this.currentAnchor})}),this.isHoverable?(c.removeEventListener("mouseover",this.handleDocumentMouseOver),c.addEventListener("mouseover",this.handleDocumentMouseOver),c.removeEventListener("mouseout",this.handleDocumentMouseOut),c.addEventListener("mouseout",this.handleDocumentMouseOut)):(c.removeEventListener("click",this.hDC),c.addEventListener("click",this.hDC))}calculatePosition=({anchor:e})=>{var{width:e,height:t,left:i,top:s}=e.getBoundingClientRect(),t=(this.el.style.left=i+window.scrollX+"px",this.el.style.top=s+t+window.scrollY+"px",c.documentElement.clientHeight),n=c.documentElement.clientWidth,{width:o,height:r,left:h,top:l}=this.el.getBoundingClientRect();Math.ceil(h+o)>=n&&(this.el.style.left=i+window.scrollX-o+e+"px"),Math.ceil(l+r)>=t&&(this.el.style.top=s+window.scrollY-r+"px")};show=async({event:t})=>{var e;!this.isAc&&(c.body.append(this.el),e=[...c.querySelectorAll(`[${o}][${r}][${n}="${this.el.getAttribute(n)}"]:not([${i}][${n}="${this.el.getAttribute(n)}"] *)`)].find(e=>e.contains(t?.target)))&&(this.currentAnchor=e,this.resizeObserver.observe(this.el),this.resizeObserver.observe(e),c.removeEventListener("keydown",this.hDKD),c.addEventListener("keydown",this.hDKD),window.removeEventListener("resize",this.handleWindowResize),window.addEventListener("resize",this.handleWindowResize),this.el.setAttribute(s,""),this.calculatePosition({anchor:e}),this.isAc=!0)};hide=async({}={})=>{this.isAc&&(this.resizeObserver.disconnect(),c.removeEventListener("keydown",this.hDKD),this.lFdE?.focus(),this.el.removeAttribute(s),this.isAc=!1)};hDKD=e=>{if("Escape"===e.key)return this.hide({event:e})};handleWindowResize=e=>{this.isAc&&this.calculatePosition({anchor:this.currentAnchor})};hDC=e=>{var t,i,s=e["target"];if(s)return s.closest(`[${n}="${this.el.getAttribute(n)}"][${o}][${r}]`)?(i=s.getAttribute(r),t=s.getAttribute(h),s.getAttribute(l)||e.preventDefault(),i&&this.spAc.includes(i)&&(i=this[i])instanceof Function?(this.el.contains(s)||(this.lFdE=s),i({args:t,event:e})):void 0):c.contains(s)&&!this.el.contains(s)?this.hide({event:e}):void 0};handleDocumentMouseOver=async e=>{var t=e["target"];if(t){var i,s,t=t.closest(`[${n}="${this.el.getAttribute(n)}"][${o}][${r}]`);if(t)return null!=this.hoverableLeaveTimeout&&clearTimeout(this.hoverableLeaveTimeout),s=t.getAttribute(r),i=t.getAttribute(h),t.getAttribute(l)||e.preventDefault(),s&&this.spAc.includes(s)&&(s=this[s])instanceof Function?(this.el.contains(t)||(this.lFdE=t),s({args:i,event:e})):void 0}};handleDocumentMouseOut=async e=>{let t=e["relatedTarget"];null!=this.hoverableLeaveTimeout&&clearTimeout(this.hoverableLeaveTimeout),this.hoverableLeaveTimeout=setTimeout(()=>t&&this.el.contains(t)?void 0:this.hide({}),125)}}}(this.window.welpodron=this.window.welpodron||{})}(document);
//# sourceMappingURL=index.iife.min.js.map