const MODULE_BASE="input-number",ATTRIBUTE_BASE="data-w-"+MODULE_BASE,ATTRIBUTE_BASE_ID=ATTRIBUTE_BASE+"-id",ATTRIBUTE_INPUT=ATTRIBUTE_BASE+"-input",ATTRIBUTE_CONTROL=ATTRIBUTE_BASE+"-control",ATTRIBUTE_ACTION=ATTRIBUTE_BASE+"-action",ATTRIBUTE_ACTION_ARGS=ATTRIBUTE_ACTION+"-args",ATTRIBUTE_ACTION_FLUSH=ATTRIBUTE_ACTION+"-flush",ATTRIBUTE_ACTION_FORCE=ATTRIBUTE_ACTION+"-force";class Input{spAc=["change","set"];el;constructor({element:e}){this.el=e,document.removeEventListener("click",this.hDC),document.removeEventListener("input",this.handleDocumentInput),document.addEventListener("click",this.hDC),document.addEventListener("input",this.handleDocumentInput)}handleDocumentInput=t=>{if(document.contains(this.el)){let e=t["target"];(e=e&&e.closest(`[${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"][${ATTRIBUTE_INPUT}]`))&&e instanceof HTMLInputElement&&t.isTrusted&&(t.preventDefault(),t=parseInt(e.value),isNaN(t)&&(e.value="0"),t=parseInt(e.value),e.min&&t<parseInt(e.min)&&(e.value=e.min),t=parseInt(e.value),e.max&&t>parseInt(e.max)&&(e.value=e.max),t=parseInt(e.value),isNaN(t)&&(e.value=""),t=new Event("input",{bubbles:!0,cancelable:!0}),e.dispatchEvent(t))}else document.removeEventListener("click",this.hDC),document.removeEventListener("input",this.handleDocumentInput)};hDC=t=>{if(document.contains(this.el)){let e=t["target"];var T,n;if(e)if(e=e.closest(`[${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"][${ATTRIBUTE_CONTROL}][${ATTRIBUTE_ACTION}]`))return n=e.getAttribute(ATTRIBUTE_ACTION),T=e.getAttribute(ATTRIBUTE_ACTION_ARGS),e.getAttribute(ATTRIBUTE_ACTION_FLUSH)||t.preventDefault(),n&&this.spAc.includes(n)&&(n=this[n])instanceof Function?n({args:T,event:t}):void 0}else document.removeEventListener("click",this.hDC),document.removeEventListener("input",this.handleDocumentInput)};change=({args:a})=>{a&&this.el.querySelectorAll(`[${ATTRIBUTE_INPUT}][${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"]`).forEach(e=>{var t=e.value,T=parseInt(e.value),n=parseInt(a);e.value=""+(T+n),T=parseInt(e.value),e.min&&T+n<parseInt(e.min)&&(e.value=e.min),T=parseInt(e.value),e.max&&T+n>parseInt(e.max)&&(e.value=e.max),T=parseInt(e.value),isNaN(T)&&(e.value=""),t!==e.value&&(n=new Event("input",{bubbles:!0,cancelable:!0}),e.dispatchEvent(n))})};set=({args:a,event:e})=>{if(a){let n=!1;e?.target&&(e=(e?.target).closest(`[${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"][${ATTRIBUTE_CONTROL}][${ATTRIBUTE_ACTION}]`))&&e.hasAttribute(ATTRIBUTE_ACTION_FORCE)&&(n=!0),this.el.querySelectorAll(`[${ATTRIBUTE_INPUT}][${ATTRIBUTE_BASE_ID}="${this.el.getAttribute(""+ATTRIBUTE_BASE_ID)}"]`).forEach(e=>{var t,T=e.value;parseInt(e.value);e.value=a,n||(t=parseInt(e.value),isNaN(t)&&(e.value="0"),t=parseInt(e.value),e.min&&t<parseInt(e.min)&&(e.value=e.min),t=parseInt(e.value),e.max&&t>parseInt(e.max)&&(e.value=e.max),t=parseInt(e.value),isNaN(t)&&(e.value="")),T!==e.value&&(t=new Event("input",{bubbles:!0,cancelable:!0}),e.dispatchEvent(t))})}}}export{Input as inputNumber};
//# sourceMappingURL=index.min.js.map