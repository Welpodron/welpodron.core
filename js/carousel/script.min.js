!function(a){a.welpodron&&a.welpodron.animation&&(a.welpodron.carousel=function(t={}){this.dom=t.dom,this.swipeThreshold=45,this.items=[...this.dom.querySelectorAll("[data-carousel-item]")];for(let t=0;t<this.items.length;t++)if(null!==this.items[t].getAttribute("data-active")){this.currentItem=this.items[t];break}this.currentItem||(this.currentItem=this.items[0]),this.items.forEach(t=>{const e=document.querySelector(`[data-item-id="${t.id}"]`);this.currentItem===t?(e&&e.setAttribute("data-active",""),t.setAttribute("data-active","")):(e&&e.removeAttribute("data-active"),t.removeAttribute("data-active"))}),this.handleTouchEnd=t=>{this.dom.removeEventListener("touchmove",this.handleTouchMove),this.dom.removeEventListener("touchend",this.handleTouchEnd);var e=Math.abs(this.touchDeltaX);e>this.swipeThreshold&&(this.slide&&this.slide(e/this.touchDeltaX<0?"next":"prev"),this.touchDeltaX=0)},this.handleTouchMove=t=>{this.touchDeltaX=t.touches&&1<t.touches.length?0:t.touches[0].clientX-this.touchStartX},this.handleTouchStart=t=>{this.touchStartX=t.touches[0].clientX,this.dom.removeEventListener("touchend",this.handleTouchEnd),this.dom.addEventListener("touchend",this.handleTouchEnd),this.dom.removeEventListener("touchmove",this.handleTouchMove),this.dom.addEventListener("touchmove",this.handleTouchMove)},this.dom.removeEventListener("touchstart",this.handleTouchStart),this.dom.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),this.controls=document.querySelectorAll(`[data-action][data-carousel-id="${this.dom.id}"]`),this.handleClick=t=>{t.preventDefault();const e=t.currentTarget;var i,t=e.getAttribute("data-action");null!==t&&this[t]&&(i=e.getAttribute("data-args"),this[t](i))},this.controls.forEach(t=>{t.removeEventListener("click",this.handleClick),t.addEventListener("click",this.handleClick)})},a.welpodron.carousel.prototype.getNextItem=function(t){var e=this.items.indexOf(this.currentItem);if("next"===t)return this.items[(e+1)%this.items.length];if("prev"===t)return this.items[(e+this.items.length-1)%this.items.length];e=parseInt(t);return isNaN(e)?void 0:this.items[e]},a.welpodron.carousel.prototype.getNextDirection=function(t){var e=this.items.indexOf(this.currentItem),t=this.items.indexOf(t),i=this.items.length-1;return(t!==i||0!==e)&&(0===t&&e===i||e<t)?"left":"right"},a.welpodron.carousel.prototype.slide=function(t){if(!this.translating){const e=this.getNextItem(t);if(e&&e!==this.currentItem){const i=this.getNextDirection(e),s=(this.translating=!0,document.querySelector(`[data-item-id="${this.currentItem.id}"]`)),r=document.querySelector(`[data-item-id="${e.id}"]`),o=new a.welpodron.animation({duration:700,from:{x:0},to:{x:100},step:t=>{this.currentItem.style.transform=`translateX(${"left"===i?"-":""}${t.props.x}%)`},easing:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,after:()=>{this.currentItem.removeAttribute("data-active"),s&&s.removeAttribute("data-active"),this.currentItem.style.transform=""}}),n=new a.welpodron.animation({duration:700,from:{x:100},to:{x:0},before:()=>{e.style.transform=`translateX(${"left"===i?"-":""}100%)`,e.style.display="block"},step:t=>{e.style.transform=`translateX(${"left"===i?"":"-"}${t.props.x}%)`},easing:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,after:()=>{e.setAttribute("data-active",""),r&&r.setAttribute("data-active",""),e.style.display="",e.style.transform=""}});Promise.all([o.finished,n.finished]).then(()=>{this.currentItem=e,this.translating=!1}),o.start(),n.start()}}},a.welpodron.carouselList=[],document.querySelectorAll("[data-carousel]").forEach(t=>{a.welpodron.carouselList.push(new a.welpodron.carousel({dom:t}))}))}(window);